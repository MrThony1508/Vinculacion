{% extends 'base.html' %}
{% block contenido %}

<style>
    :root {
        --utc-blue: #173D62;
        --utc-green: #2ecc71;
        --bg-light: #f4f7f6;
    }

    .page-header {
        background: linear-gradient(135deg, var(--utc-blue) 0%, #2c3e50 100%);
        color: white;
        padding: 60px 0;
        border-radius: 0 0 50px 50px;
        margin-bottom: 40px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .search-container {
        max-width: 600px;
        margin: -30px auto 40px;
        position: relative;
        z-index: 10;
    }

    .search-input {
        border-radius: 50px;
        padding: 15px 25px 15px 50px;
        border: none;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        font-size: 1.1rem;
    }

    .search-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #95a5a6;
        font-size: 1.2rem;
    }

    .programa-card {
        border: none;
        border-radius: 20px;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        overflow: hidden;
        background: white;
        border-left: 8px solid var(--utc-green);
    }

    .programa-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 35px rgba(0,0,0,0.1) !important;
    }

    .stat-box {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 15px;
        transition: background 0.3s;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .stat-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        color: #7f8c8d;
        font-weight: 700;
        margin-top: 10px;
    }

    .stat-value {
        font-size: 0.9rem;
        color: var(--utc-blue);
        font-weight: 600;
        text-align: center;
    }

    .badge-category {
        background: rgba(46, 204, 113, 0.1);
        color: var(--utc-green);
        padding: 5px 15px;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 700;
        margin-bottom: 15px;
        display: inline-block;
    }
</style>

<div class="page-header text-center">
    <div class="container">
        <h1 class="display-4 fw-bold">Programas y Proyectos</h1>
        <p class="lead opacity-75">Facultad de Ciencias de la Ingeniería y Aplicadas (CIYA)</p>
    </div>
</div>

<div class="container">
    <div class="search-container">
        <i class="bi bi-search search-icon"></i>
        <input type="text" id="buscar" class="form-control search-input" placeholder="Buscar proyecto, coordinador o periodo...">
    </div>

    <div id="programasContainer" class="row">
        {% if programas %}
            {% for programa in programas %}
            <div class="col-12 programa-card-wrapper mb-4">
                <div class="card shadow-sm p-4 programa-card animate__animated animate__fadeInUp" 
                     >
                    
                    <div class="badge-category" style="background: rgba(0,0,0,0.05); color: #475569;">
                        PROYECTO VIGENTE
                    </div>
                    
                    <h3 class="fw-bold text-dark mb-3">{{ programa.proyecto }}</h3>
                    
                    <p class="text-muted mb-4">
                        Iniciativa académica orientada al fortalecimiento institucional y vinculación con la sociedad de la Universidad Técnica de Cotopaxi.
                    </p>
                    
                    <div class="row g-3">
                        <div class="col-6 col-md-3">
                            <div class="stat-box">
                                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="35" alt="Coordinador">
                                <span class="stat-label">Coordinador</span>
                                <span class="stat-value">{{ programa.coordinador }}</span>
                            </div>
                        </div>
                        
                        <div class="col-6 col-md-3">
                            <div class="stat-box">
                                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135810.png" width="35" alt="Estudiantes">
                                <span class="stat-label">Estudiantes</span>
                                <span class="stat-value">{{ programa.estudiantes }} asignados</span>
                            </div>
                        </div>
                        
                        <div class="col-6 col-md-3">
                            <div class="stat-box">
                                <img src="https://cdn-icons-png.flaticon.com/512/1827/1827951.png" width="35" alt="Calendario">
                                <span class="stat-label">Periodo</span>
                                <span class="stat-value">{{ programa.periodo }}</span>
                            </div>
                        </div>

                        <div class="col-6 col-md-3">
                            <div class="stat-box">
                                <img src="https://cdn-icons-png.flaticon.com/512/3209/3209265.png" width="35" alt="Estado">
                                <span class="stat-label">Estado</span>
                                <span class="stat-value text-success">En Ejecución</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center py-5">
                <i class="bi bi-folder-x text-muted" style="font-size: 4rem;"></i>
                <h4 class="text-secondary mt-3">No hay proyectos registrados aún</h4>
            </div>
        {% endif %}
    </div>

    <div id="noResults" class="text-center py-5 d-none">
        <i class="bi bi-search text-muted" style="font-size: 3rem;"></i>
        <h4 class="mt-3 text-secondary">No se encontraron resultados</h4>
    </div>
</div>

<script>
document.getElementById("buscar").addEventListener("input", function() {
    const texto = this.value.toLowerCase();
    const tarjetas = document.querySelectorAll(".programa-card-wrapper");
    let encontrados = 0;

    tarjetas.forEach(t => {
        const contenido = t.innerText.toLowerCase();
        if (contenido.includes(texto)) {
            t.classList.remove("d-none");
            encontrados++;
        } else {
            t.classList.add("d-none");
        }
    });

    const noResults = document.getElementById("noResults");
    if (encontrados === 0) {
        noResults.classList.remove("d-none");
    } else {
        noResults.classList.add("d-none");
    }
});
</script>

{% endblock %}